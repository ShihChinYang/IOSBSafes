"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3932],{63801:function(e,a,r){r.d(a,{Z:function(){return y}});var t=r(85893),n=r(67294),i=r(9473),s=r(68888),o=r(88083),l=r(76529),c=r(49614),d=r(19755),u=r.n(d),h=r(82354),f=r.n(h),m=r(92867),g=r(28714),p=r(21772),x=r(70562),b=r(49861),j=r(40699),w=r(84390);function y(e){let{editorId:a,mode:d,content:h,onContentChanged:y,onPenClicked:k,showPen:v=!0,editable:S=!0,hideIfEmpty:F=!1,writingModeReady:Z=null,readOnlyModeReady:N=null,onDraftSampled:C=null,onDraftClicked:T=null,onDraftDelete:B=null}=e,I=(0,i.I0)(),q=(0,n.useRef)(null),[L,U]=(0,n.useState)(null),[R,E]=(0,n.useState)(null),P=(0,i.v9)(e=>e.auth.expandedKey),V=(0,i.v9)(e=>e.auth.froalaLicenseKey),M=(0,i.v9)(e=>e.page.id),A=(0,i.v9)(e=>e.page.itemKey),H=(0,i.v9)(e=>e.page.itemIV),K=(0,i.v9)(e=>e.page.draft);(0,g.qu)(!1,"editor key: ".concat(V));let[O,_]=(0,n.useState)(!1),[D,z]=(0,n.useState)(!1),[X,G]=(0,n.useState)(null);(0,g.qu)(!1,"Rendering editor, id,  mode: ","".concat(a," ").concat(d));let W=()=>{let e;if(D&&!O){switch(a){case"title":e={key:V,toolbarButtons:["undo","redo"],toolbarButtonsMD:["undo","redo"],toolbarButtonsSM:["undo","redo"],toolbarButtonsXS:["undo","redo"],placeholderText:"Page Title"};break;case"content":if(!A){let e=(0,j.d9)();I((0,w.Yj)({itemKey:e}))}$(q.current).html(h),e={key:V,toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","fontFamily","fontSize","lineHeight","|","color","emoticons","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertTable","undo","redo","clearFormatting"],toolbarButtonsMD:["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","fontFamily","fontSize","lineHeight","|","color","emoticons","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertTable","undo","redo","clearFormatting"],toolbarButtonsSM:["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","fontFamily","fontSize","lineHeight","|","color","emoticons","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertTable","undo","redo","clearFormatting"],toolbarButtonsXS:["bold","italic","color","emoticons","paragraphFormat","fontFamily","formatOL","formatUL","insertLink","insertImage","insertVideo","insertTable","undo","redo"],fontFamily:{"Arial,Helvetica,sans-serif":"Arial","'Edu SA Beginner Variable', cursive":"Edu SA Beginner","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","'Montserrat Variable', sans-serif":"Montserrat","'Noto Serif Variable', serif":"Noto Serif","'Oswald Variable', sans-serif":"Oswald","'Roboto Flex Variable', sans-serif":"Roboto Flex","'Times New Roman',Times,serif":"Times New Roman","'Dancing Script Variable', cursive":"Dancing Script"},fontFamilySelection:!1,tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows","fr-no-borders":"No Borders"}};break;default:e={key:V,toolbarButtons:["bold","italic","underline","strikeThrough","undo","redo"],toolbarButtonsMD:["bold","italic","underline","strikeThrough","undo","redo"],toolbarButtonsSM:["bold","italic","underline","strikeThrough","undo","redo"],toolbarButtonsXS:["bold","italic","underline","strikeThrough","undo","redo"]}}e.videoInsertButtons=["videoBack","|","videoUpload"],e.imageInsertButtons=["imageBack","|","imageUpload"],$(q.current).froalaEditor(e),"content"===a&&G($(q.current).froalaEditor("html.get")),q.current.style.overflowX=null,O||((0,g.qu)(!1,"setEditorOn"),_(!0)),Z&&Z()}},J=()=>{let e=$(q.current).froalaEditor("html.get");(0,g.qu)(!1,"editor content: ",e),setTimeout(()=>{y(a,e)},0)},Q=()=>{O&&($(q.current).froalaEditor("destroy"),$(q.current).html(h),q.current.style.overflowX="auto",L&&(clearInterval(L),U(null),E(null)),G(null),_(!1),N&&N())};(0,n.useEffect)(()=>{switch(d){case"ReadOnly":Q();break;case"Writing":W();break;case"Saving":J()}},[d]),(0,n.useEffect)(()=>{M&&A&&($(".container").data("itemId",M),$(".container").data("itemKey",A))},[M,A,H]),(0,n.useEffect)(()=>{window.$=window.jQuery=u(),r.e(4253).then(r.bind(r,44253)).then(async e=>{await e.Froala,await e.FroalaPlugins,await e.Codemirror,await e.Photoswipe,await e.Others,z(!0)})},[]),(0,n.useEffect)(()=>{D&&window&&((0,g.qu)(!1,"bsafesFroala: ".concat(window.bsafesFroala.name)),window.bsafesFroala.bSafesPreflight=Y,window.bsafesFroala.rotateImage=ee,window.bsafesFroala.downScaleImage=ea,window.bsafesFroala.convertUint8ArrayToBinaryString=g.tp,window.bsafesFroala.compareArraryBufferAndUnit8Array=er,window.bsafesFroala.encryptBinaryString=et,window.bsafesFroala.encryptLargeBinaryString=en,window.bsafesFroala.encryptChunkBinaryStringToBinaryStringAsync=ei,window.bsafesFroala.preS3Upload=es,window.bsafesFroala.preS3ChunkUpload=eo,window.bsafesFroala.uploadData=el,window.bsafesFroala.getBrowserInfo=ec,window.bsafesFroala.arraryBufferToStr=ed,window.bsafesFroala.getEditorConfig=eu)},[D]),(0,n.useEffect)(()=>{null!==X&&"content"===a&&E("Start")},[X]),(0,n.useEffect)(()=>{let e;switch((0,g.qu)(!1,"interval state:",R),R){case"Start":U(setInterval(()=>{(0,g.qu)(!1,"Saving draft ..."),(e=$(q.current).froalaEditor("html.get"))!==X&&((0,g.qu)(!1,"Content changed"),C(e),G(e),E("Stop"))},1e3));break;case"Stop":clearInterval(L),U(null)}},[R]);let Y=e=>{(0,g.qu)(!1,"bSafesPreflight"),(0,g.$3)({api:"/memberAPI/preflight",dispatch:I}).then(a=>{(0,g.qu)(!1,a),"ok"===a.status?((0,g.qu)(!1,"bSafesPreflight ok: "),e(null,P)):((0,g.qu)(!1,"woo... bSafesPreflight failed: ",a.error),e(a.error))}).catch(a=>{(0,g.qu)(!1,"woo... bSafesPreflight failed."),e(a)})},ee=async(e,a,r)=>{try{let t=await (0,b.N)(e,a);(0,g.qu)(!1,"Rotation done"),r(null,t.blob,t.byteString)}catch(e){(0,g.qu)(!1,"rotateImage error:",e),r(e)}},ea=(e,a,r)=>new Promise(async(t,n)=>{try{let n=await (0,b.M)(e,a,r);(0,g.qu)(!1,"downScaleImage done"),t(n)}catch(e){(0,g.qu)(!1,"downScaleImage error:",e),n(e)}}),er=(e,a)=>(0,x.nW)(e,a),et=(e,a)=>(0,x.UJ)(e,a),en=(e,a)=>(0,x.sz)(e,a),ei=(e,a)=>(0,x.kh)(e,a),es=()=>new Promise(async(e,a)=>{(0,g.$3)({api:"/memberAPI/preS3Upload",dispatch:I}).then(r=>{if((0,g.qu)(!1,r),"ok"===r.status){let a=r.s3Key;e({status:"ok",s3Key:a,signedURL:r.signedURL,signedGalleryURL:r.signedGalleryURL,signedThumbnailURL:r.signedThumbnailURL})}else(0,g.qu)(!1,"preS3Upload failed: ",r.error),a({status:"error",error:r.error})}).catch(e=>{(0,g.qu)(!1,"preS3Upload failed: ",e),a({status:"error",error:e})})}),eo=(e,a,r)=>new Promise((t,n)=>{let i,s;(0,g.$3)({api:"/memberAPI/preS3ChunkUpload",body:{itemId:e,chunkIndex:a.toString(),timeStamp:r},dispatch:I}).then(e=>{(0,g.qu)(!1,e),"ok"===e.status?(s=(i=e.s3Key).split("_chunk_")[0],t({s3Key:i,s3KeyPrefix:s,signedURL:e.signedURL})):((0,g.qu)(!1,"preS3ChunkUpload failed: ",e.error),n(e.error))}).catch(e=>{(0,g.qu)(!1,"preS3ChunkUpload failed: ",e),n(e)})}),el=(e,a,r,t)=>new Promise(async(n,i)=>{try{let i=await (0,p.B1)(a,r,e,{onUploadProgress:async e=>{t(e)},headers:{"Content-Type":"binary/octet-stream"}},null);n(i)}catch(e){i(e)}}),ec=()=>(0,g.S7)(),ed=e=>(0,g.q_)(e),eu=()=>(0,m.M2)();return(0,t.jsx)(t.Fragment,{children:D?(0,t.jsxs)(t.Fragment,{children:[v&&S?(0,t.jsxs)(s.Z,{children:[(0,t.jsxs)(o.Z,{xs:6,children:["title"===a&&"<h2></h2>"===h&&(0,t.jsx)("h6",{className:"m-0 text-secondary",children:"Title"}),"content"===a&&null===h&&(0,t.jsx)("h6",{className:"m-0 text-secondary",children:"Write"})]}),(0,t.jsxs)(o.Z,{xs:6,children:[(0,t.jsx)(l.Z,{variant:"link",className:"text-dark pull-right p-0",onClick:()=>{k(a)},children:(0,t.jsx)("i",{className:"fa fa-pencil","aria-hidden":"true"})}),"content"===a&&null!==K&&(0,t.jsxs)(c.Z,{className:"pull-right mx-3",size:"sm",children:[(0,t.jsx)(l.Z,{variant:"outline-danger",className:"m-0",onClick:T,children:"Draft"}),(0,t.jsx)(l.Z,{variant:"danger",onClick:B,children:"X"})]})]})]}):"",("Writing"===d||"Saving"===d||"ReadOnly"===d||!(F&&(!h||0===h.length)))&&(0,t.jsx)(s.Z,{className:"".concat("title"===a?f().titleEditorRow:f().editorRow," fr-element fr-view"),children:(0,t.jsx)("div",{className:"inner-html",ref:q,dangerouslySetInnerHTML:{__html:h},style:{overflowX:"auto"}})})]}):""})}r(22079)},9432:function(e,a,r){r.d(a,{Z:function(){return k}});var t=r(85893),n=r(67294),i=r(9473),s=r(11163),o=r(33353),l=r(68888),c=r(88083),d=r(76529),u=r(56693),h=r(4659),f=r(59920),m=r(38743),g=r(49003),p=r(37820),x=r.n(p),b=r(82354),j=r.n(b),w=r(84390),y=r(92867);function k(){let e=(0,i.I0)(),a=(0,s.useRouter)(),r=(0,i.v9)(e=>e.container.workspaceKey),u=(0,i.v9)(e=>e.container.searchKey),h=(0,i.v9)(e=>e.container.searchIV),f=(0,i.v9)(e=>e.page.oldVersion),m=(0,i.v9)(e=>e.page.activity),g=(0,i.v9)(e=>e.page.tags),p=(0,i.v9)(e=>e.page.itemCopy),[b,y]=(0,n.useState)([]),[k,S]=(0,n.useState)(!1),[F,Z]=(0,n.useState)(!1),N=e=>{y(e),k||S(!0)};return(0,n.useEffect)(()=>{y(g)},[g]),(0,n.useEffect)(()=>{0===m&&k&&S(!1)},[m]),(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(l.Z,{children:(0,t.jsx)(c.Z,{children:(0,t.jsxs)("div",{className:"pull-right",children:[(0,t.jsx)("span",{children:p&&"v.".concat(p.version)}),(0,t.jsx)(d.Z,{variant:"link",className:"text-dark",onClick:()=>{Z(!0),e((0,w.Ey)()),e((0,w.Kh)({page:1}))},children:(0,t.jsx)("i",{className:"fa fa-history","aria-hidden":"true"})}),!1]})})}),(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(c.Z,{xs:"1",className:"px-0",children:(0,t.jsx)("label",{className:"pull-right py-2",children:(0,t.jsx)("span",{children:(0,t.jsx)("i",{className:"fa fa-tags fa-lg","aria-hidden":"true"})})})}),(0,t.jsx)(c.Z,{xs:"10",children:f?(0,t.jsx)(x(),{value:b,onChange:N,disabled:!0}):(0,t.jsx)(x(),{value:b,onChange:N})})]}),k&&(0,t.jsx)(l.Z,{children:(0,t.jsxs)(c.Z,{md:"10",children:[(0,t.jsx)(d.Z,{variant:"link",className:"pull-right",onClick:()=>{y(g),S(!1)},children:(0,t.jsx)("i",{className:"fa fa-times fa-lg ".concat(j().orangeText),"aria-hidden":"true"})}),(0,t.jsx)(d.Z,{variant:"link",className:"pull-right",onClick:()=>{e((0,w.Sx)(b,r,u,h))},children:(0,t.jsx)("i",{className:"fa fa-check fa-lg ".concat(j().greenText),"aria-hidden":"true"})})]})}),(0,t.jsx)(v,{onLinkChanged:e=>{a.push(e),Z(!1)},versionsHistoryModalOpened:F,closeVersionsHistoryModal:()=>Z(!1)})]})}function v(e){let{onLinkChanged:a,versionsHistoryModalOpened:r,closeVersionsHistoryModal:n}=e,s=(0,i.I0)(),o=(0,i.v9)(e=>e.page.itemVersions),l=(0,i.v9)(e=>e.page.totalVersions),c=(0,i.v9)(e=>e.page.versionsPageNumber),g=(0,i.v9)(e=>e.page.versionsPerPage),p=e=>{a(e)},x=o.map((e,a)=>(0,t.jsx)(S,{onVersionSelected:p,id:e.id,container:e.container,updatedBy:e.updatedBy,updatedTime:e.updatedTime,updatedText:e.updatedText,updatedTimeStamp:e.updatedTimeStamp,version:e.version,latestVersion:0===a},a));return(0,t.jsxs)(u.Z,{show:r,onHide:n,children:[(0,t.jsx)(h.Z,{closeButton:!0,children:(0,t.jsxs)(f.Z,{children:[(0,t.jsx)("h4",{children:"Versions"}),(0,t.jsx)(d.Z,{variant:"link",href:"#",size:"sm",children:"Go to top"})]})}),(0,t.jsxs)(m.Z,{children:[x,l>c*g&&(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)(d.Z,{variant:"link",className:"text-center",size:"sm",onClick:e=>{s((0,w.Kh)({page:c+1}))},children:"More"})})]})]})}function S(e){let{onVersionSelected:a,id:r,container:n,updatedBy:i,updatedTime:s,updatedText:o,updatedTimeStamp:d,version:u,latestVersion:h}=e,f=(0,y.vp)({id:r,container:n});h||(f+="?version=".concat(u));let m=()=>{a(f)};return(0,t.jsxs)(g.Z.Item,{children:[(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(c.Z,{xs:3,onClick:m,style:{cursor:"pointer"},children:(0,t.jsxs)("h4",{children:["v.",u]})}),(0,t.jsx)(c.Z,{xs:8,onClick:m,style:{cursor:"pointer"},children:(0,t.jsx)("h5",{className:"pull-right px-2",children:o})}),(0,t.jsx)(c.Z,{xs:1,children:(0,t.jsx)("a",{className:j().externalLink,target:"_blank",href:f,rel:"noopener noreferrer",children:(0,t.jsx)("i",{className:"me-2 fa fa-external-link mt-1  text-dark pull-right","aria-hidden":"true"})})})]}),(0,t.jsxs)(l.Z,{onClick:m,style:{cursor:"pointer"},children:[(0,t.jsx)(c.Z,{xs:6,children:(0,t.jsx)("p",{children:i})}),(0,t.jsx)(c.Z,{xs:6,children:(0,t.jsx)("p",{className:"pull-right",children:s})})]}),(0,t.jsx)(l.Z,{onClick:m,style:{cursor:"pointer"},children:(0,t.jsx)(c.Z,{xs:12,children:(0,t.jsx)("p",{className:"pull-right",children:d})})})]},r)}},84138:function(e,a,r){r.d(a,{Z:function(){return o}});var t=r(85893),n=r(76529),i=r(82354),s=r.n(i);function o(e){let{isEditing:a,onWrite:r,readyForSaving:i=!0,onSave:o,onCancel:l,canEdit:c=!0}=e;return(0,t.jsxs)(t.Fragment,{children:[c&&!a?(0,t.jsx)(n.Z,{onClick:r,className:"".concat(s().btnCircle," ").concat(s().btnFloating," ").concat(s().btnFloatingWrite),children:(0,t.jsx)("i",{className:"fa fa-pencil fa-2x","aria-hidden":"true"})}):(0,t.jsx)(t.Fragment,{}),a&&i?(0,t.jsx)(n.Z,{onClick:o,className:"".concat(s().btnCircle," ").concat(s().btnFloating," ").concat(s().btnFloatingSave),children:(0,t.jsx)("i",{className:"fa fa-check fa-2x","aria-hidden":"true"})}):(0,t.jsx)(t.Fragment,{}),a?(0,t.jsx)(n.Z,{onClick:l,className:"".concat(s().btnCircle," ").concat(s().btnFloating," ").concat(s().btnFloatingCancel),children:(0,t.jsx)("i",{className:"fa fa-times fa-2x","aria-hidden":"true"})}):(0,t.jsx)(t.Fragment,{})]})}},62994:function(e,a,r){r.d(a,{Z:function(){return d}});var t=r(85893);r(67294);var n=r(4298),i=r.n(n),s=r(9473),o=r(43686),l=r(28714),c=0;function d(){let e=(0,s.I0)(),a=(0,s.v9)(e=>e.scripts.scripts);(0,s.v9)(e=>e.scripts.done),(0,l.qu)(!1,"Render count:",c),c++;let r=a.map((a,r)=>(0,t.jsx)(i(),{id:a.id,src:a.src,onLoad:()=>{e((0,o.CL)(r))}},r));return(0,t.jsx)("div",{children:r})}}}]);