"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1007],{21673:function(e,t,a){a.d(t,{Z:function(){return o}});var s=a(85893),n=a(67294),i=a(81836),r=a(76720),l=a(35972),c=a(5960);function o(e){let{show:t=!1,handleClose:a,handleCreateANewItem:o}=e;(0,c.qu)(!1,"Rendering NewItemModal: ","".concat(t,"}"));let u=(0,n.useRef)(null);return(0,s.jsx)(i.Z,{show:t,onHide:a,onEntered:()=>{u.current.focus()},children:(0,s.jsxs)(i.Z.Body,{children:[(0,s.jsx)("h3",{children:"Title"}),(0,s.jsx)(l.Z.Control,{ref:u,size:"lg",type:"text"}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(r.Z,{variant:"primary",onClick:()=>{o(u.current.value)},className:"pull-right",children:"Create"}),(0,s.jsx)(r.Z,{variant:"secondary",onClick:a,className:"pull-right",children:"Close"})]})})}},13601:function(e,t,a){var s=a(85893),n=a(67294),i=a(11163),r=a(9473),l=a(39332),c=a(97375),o=a(67204),u=a(93474),h=a.n(u),d=a(87894),f=a(28024),m=a(5960);t.Z=e=>{let{itemId:t,children:a}=e,u=(0,r.I0)(),p=(0,i.useRouter)(),g=(0,l.useSearchParams)(),[x,v]=(0,n.useState)(!1),j=(0,r.v9)(e=>e.auth.accountVersion),k=(0,r.v9)(e=>e.auth.demoMode),N=(0,r.v9)(e=>e.auth.serviceWorkerRegistered),Z=(0,r.v9)(e=>e.auth.isLoggedIn),w=(0,r.v9)(e=>e.auth.searchKey),C=(0,r.v9)(e=>e.auth.searchIV),I=(0,r.v9)(e=>e.auth.expandedKey),y=(0,r.v9)(e=>e.container.navigationInSameContainer),P=(0,r.v9)(e=>e.container.container),b=(0,r.v9)(e=>e.container.workspace),q=(0,r.v9)(e=>e.container.workspaceKey),E=(0,r.v9)(e=>e.container.workspaceKeyReady),W=(0,r.v9)(e=>e.container.startDateValue),[S,B]=(0,n.useState)(new Date(W)),z=(0,r.v9)(e=>e.page.aborted),D=(0,r.v9)(e=>e.page.id),R=(0,r.v9)(e=>e.page.pageNumber),K=(0,r.v9)(e=>e.page.navigationMode),V=(0,r.v9)(e=>e.page.space),A=(0,r.v9)(e=>e.page.container),T=(0,r.v9)(e=>e.page.itemCopy);(0,m.qu)(!1,"aborted: ",z),(0,m.qu)(!1,"itemId: ",t),(0,m.qu)(!1,"pageItemId: ",D);let F=()=>{(0,m.qu)(!1,"Reload a page: ",t),u((0,f.cD)(!1)),u((0,d.vB)(!1)),(0,m.qu)(!1,"set pageItemId: ",p.query.itemId),u((0,f.sF)(p.query.itemId));let e=p.asPath;"contents"===(e=e.split("/")[2])&&(u((0,d.H5)()),"d"===t.split(":")[0]&&(u((0,d.Pm)(new Date().getTime())),u((0,d.p8)(!1))))};return(0,n.useEffect)(()=>{(0,m.qu)(!1,"pageItemWrapper useEffect, []");let e=(e,t)=>{let{shallow:a}=t;console.log("App is changing to ".concat(e," ").concat(a?"with":"without"," shallow routing")),u((0,f.JG)()),u((0,f.rs)()),u((0,d.H5)())},t=()=>{(0,m.qu)(!1,"handleRouteChangeComplete - initPage"),u((0,f.df)())};return p.events.on("routeChangeStart",e),p.events.on("routeChangeComplete",t),()=>{(0,m.qu)(!1,"pageItemWrapper events.off"),p.events.off("routeChangeStart",e),p.events.off("routeChangeComplete",t)}},[]),(0,n.useEffect)(()=>{(0,m.qu)(!1,"initPage"),u((0,f.df)())},[t]),(0,n.useEffect)(()=>{(0,m.qu)(!1,"demoMode: ".concat(k,", ").concat(Z,", ").concat(t,", ").concat(D)),(Z||k&&N)&&t&&!D&&!z&&F()},[Z,t,D,z,k,N]),(0,n.useEffect)(()=>{if(D){u((0,d.$L)(!1));let e=g.get("version");(0,m.qu)(!1,"Dispatch getPageItemThunk ...");let t={itemId:D,navigationInSameContainer:y};e&&(t.version=parseInt(e)),u((0,f.Ed)(t));let a=document.getElementById("BSafesPage");a&&y&&a.scrollIntoView({behavior:"smooth"})}},[D]),(0,n.useEffect)(()=>{K&&((0,m.qu)(!1,"setContainerData ..."),u((0,f.BT)({itemId:D,container:{space:b,id:P}})))},[K]),(0,n.useEffect)(()=>{R&&((0,m.qu)(!1,"pageNumber: ",R),R%2?u((0,f.ml)(h().leftPagePanel)):u((0,f.ml)(h().rightPagePanel)))},[R]),(0,n.useEffect)(()=>{if(V){let e=p.asPath;if("contents"!==(e=e.split("/")[2])&&A===P){u((0,d.vB)(!0));return}if("contents"===e&&V===b){D!==P&&u((0,d.ef)({container:D})),u((0,d.vB)(!0));return}if(V===b){A!==P&&u((0,d.ef)({container:A})),u((0,d.vB)(!0));return}u((0,d.k_)()),v(!0)}},[V]),(0,n.useEffect)(()=>{if(x){let e=p.asPath;if(e=e.split("/")[2],"u"===V.substring(0,1))(0,m.qu)(!1,"Dispatch initWorkspace ..."),"contents"!==e?u((0,d.XZ)({container:A,workspaceId:V,workspaceKey:I,searchKey:w,searchIV:C})):u((0,d.XZ)({container:D,workspaceId:V,workspaceKey:I,searchKey:w,searchIV:C})),u((0,d.vB)(!0));else{let t;t="v1"===j?V.substring(0,V.length-4):V,"contents"!==e?u((0,d.VM)({teamId:t,container:A})):u((0,d.VM)({teamId:t,container:D}))}}},[x]),(0,n.useEffect)(()=>{if((0,m.qu)(!1,"useEffect [workspaceKey] ..."),!E||!T)return;let e=p.asPath;"contents"!==(e=e.split("/")[2])&&E&&q&&T&&(D.split(":")[0],(0,m.qu)(!1,"Dispatch decryptPageItemThunk ..."),u((0,f.t_)({itemId:D,workspaceKey:q})),v(!1))},[E]),(0,n.useEffect)(()=>{if((0,m.qu)(!1,"useEffect [workspaceKey] ..."),E&&D&&P&&E){let e=D.split(":")[0],t=p.asPath;"contents"===(t=t.split("/")[2])&&(v(!1),(0,m.qu)(!1,"listItemsThunk ..."),"d"!==e?u((0,d.bZ)({pageNumber:1})):(u((0,d.bZ)({startDate:(0,o.default)(S,"yyyyLL")})),u((0,d.p8)(!1))))}},[E,P]),(0,s.jsx)(c.Z,{fluid:!0,children:a})}},43445:function(e,t,a){a.d(t,{Z:function(){return N}});var s=a(85893),n=a(67294),i=a(11163),r=a(9473),l=a(19101),c=a(68070),o=a(7122),u=a(76720),h=a(90965),d=a(32121),f=a(35972),m=a(22135),p=a(93474),g=a.n(p),x=a(21673),v=a(5960),j=a(87894),k=a(41119);function N(e){let{pageNumber:t=null,onCoverClicked:a=null,onContentsClicked:p,onPageNumberChanged:N=null,onGotoFirstItem:Z=null,onGotoLastItem:w=null,onSubmitSearch:C=null,onCancelSearch:I=null}=e;(0,v.qu)(!1,"Rendering TopControlPanel:",t);let y=(0,r.I0)(),P=(0,n.useRef)(null),b=(0,n.useRef)(null),q=(0,i.useRouter)(),[E,W]=(0,n.useState)(!1),[S,B]=(0,n.useState)(""),[z,D]=(0,n.useState)(null),[R,K]=(0,n.useState)(null),[V,A]=(0,n.useState)(null),[T,F]=(0,n.useState)(null),[M,L]=(0,n.useState)(!1),_=(0,r.v9)(e=>e.page.activity),G=(0,r.v9)(e=>e.page.id),H=(0,r.v9)(e=>e.page.container),X=(0,r.v9)(e=>e.page.position),J=(0,r.v9)(e=>e.page.title),O=(0,r.v9)(e=>e.page.itemCopy),$=(0,r.v9)(e=>e.container.activity),Q=(0,r.v9)(e=>e.container.workspace),U=(0,r.v9)(e=>e.container.newItem),Y=(0,r.v9)(e=>e.container.container),ee=(0,r.v9)(e=>e.container.workspaceKey),et=(0,r.v9)(e=>e.container.searchKey),ea=(0,r.v9)(e=>e.container.searchIV),es=(0,r.v9)(e=>e.container.reloadAPage),en=(0,r.v9)(e=>e.container.itemTrashed),ei=(0,n.forwardRef)(function(e,t){let{children:a,onClick:n}=e;return(0,s.jsxs)("a",{href:"",ref:t,onClick:e=>{e.preventDefault(),n(e)},children:[(0,s.jsx)("i",{className:"fa fa-plus fa-lg text-white","aria-hidden":"true"}),a]})}),er=e=>{D("Page"),K(e),A(G),F(X),L(!0)},el=async e=>{(0,v.qu)(!1,"createANewItem",e),L(!1),y((0,j.Ag)({titleStr:e,currentContainer:Y,selectedItemType:z,addAction:R,targetItem:V,targetPosition:T,workspaceKey:ee,searchKey:et,searchIV:ea}))},ec=e=>{W(!0)},eo=e=>{e.preventDefault(),C(S)};return(0,n.useEffect)(()=>{P.current&&(P.current.value=t)},[t]),(0,n.useEffect)(()=>{E&&b.current.focus()},[E]),(0,n.useEffect)(()=>{if(U){let e=(0,k.vp)(U,!0);y((0,j.Ej)()),q.push(e)}},[U]),(0,n.useEffect)(()=>{es&&(y((0,j.vp)()),q.reload())},[es]),(0,n.useEffect)(()=>{en&&(y((0,j.aP)(!1)),q.push("/trashBox/"+Q))},[en]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{children:(0,s.jsx)(c.Z,{xs:12,sm:{span:10,offset:1},lg:{span:8,offset:2},children:(0,s.jsx)(d.Z,{className:"".concat(g().containerControlPanel),children:(0,s.jsx)(d.Z.Body,{className:"",children:(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)(c.Z,{xs:4,children:[0===_&&0===$&&Q&&Q.startsWith("d:")&&(Y===Q||G&&G.startsWith("p:"))&&(0,s.jsx)(u.Z,{onClick:e=>{q.push("/")},variant:"link",size:"sm",className:"text-white",children:(0,s.jsx)("i",{className:"fa fa-home fa-lg","aria-hidden":"true"})}),0===_&&0===$&&!Y&&(0,s.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",children:(0,s.jsx)("i",{className:"fa fa-square fa-lg","aria-hidden":"true"})}),0===_&&0===$&&Y&&(Y.startsWith("u")||Y.startsWith("t"))&&(0,s.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:a,children:(0,s.jsx)("i",{className:"fa fa-square fa-lg","aria-hidden":"true"})}),0===_&&0===$&&(t||Y&&Y.startsWith("n"))&&(0,s.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:a,children:(0,s.jsx)("i",{className:"fa fa-book fa-lg","aria-hidden":"true"})}),0===_&&0===$&&Y&&Y.startsWith("f")&&(0,s.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:a,children:(0,s.jsx)("i",{className:"fa fa-folder-o fa-lg","aria-hidden":"true"})}),0===_&&0===$&&Y&&Y.startsWith("b")&&(0,s.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:a,children:(0,s.jsx)("i",{className:"fa fa-archive fa-lg","aria-hidden":"true"})}),(t||Y&&(Y.startsWith("n")&&!q.asPath.includes("/contents/")||Y.startsWith("f")&&!q.asPath.includes("/contents/")||Y.startsWith("b")&&!q.asPath.includes("/contents/")))&&(0,s.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:p,children:(0,s.jsx)("i",{className:"fa fa-list-ul fa-lg","aria-hidden":"true"})})]}),(0,s.jsxs)(c.Z,{xs:8,children:[(t||Y&&Y.startsWith("n"))&&(0,s.jsxs)(f.Z.Group,{className:"pull-right",children:[(0,s.jsx)(f.Z.Control,{ref:P,type:"text",defaultValue:t||"",className:"".concat(g().pageNavigationPart," ").concat(g().pageNumberInput," pt-0 pb-0")}),(0,s.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",id:"gotoPageBtn",onClick:e=>{N&&N(P.current.value)},children:(0,s.jsx)("i",{className:"fa fa-arrow-right fa-lg","aria-hidden":"true"})}),(0,s.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",id:"gotoFirstItemBtn",onClick:Z,children:(0,s.jsx)("i",{className:"fa fa-step-backward fa-lg","aria-hidden":"true"})}),(0,s.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",id:"gotoLastItemBtn",onClick:w,children:(0,s.jsx)("i",{className:"fa fa-step-forward fa-lg","aria-hidden":"true"})}),q.asPath.includes("/contents/")&&!E&&(0,s.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:ec,children:(0,s.jsx)("i",{className:"fa fa-search fa-lg","aria-hidden":"true"})})]}),Y&&(Y.startsWith("u")||Y.startsWith("t")||Y.startsWith("f")||Y.startsWith("b"))&&(0,s.jsxs)(h.Z,{className:"pull-right",children:[Y.startsWith("f")&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",id:"gotoFirstItemBtn",onClick:Z,children:(0,s.jsx)("i",{className:"fa fa-step-backward fa-lg","aria-hidden":"true"})}),(0,s.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",id:"gotoLastItemBtn",onClick:w,children:(0,s.jsx)("i",{className:"fa fa-step-forward fa-lg","aria-hidden":"true"})})]}),G&&G.startsWith("p")&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.Z,{align:"end",className:"justify-content-end ".concat(g().mt3px),children:[(0,s.jsx)(m.Z.Toggle,{as:ei,variant:"link"}),(0,s.jsxs)(m.Z.Menu,{children:[(0,s.jsx)(m.Z.Item,{onClick:()=>er("addAnItemBefore"),children:"Add before"}),(0,s.jsx)(m.Z.Item,{onClick:()=>er("addAnItemAfter"),children:"Add after"})]})]})}),!q.asPath.includes("/contents/")&&G&&(G.startsWith("p")||G.startsWith("b")||G.startsWith("f"))&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:e=>{let t={id:G,container:H,position:X,title:J,itemPack:{type:O.type}};(0,k.dO)(G)?(t.itemPack.totalItemVersions=O.totalItemVersions,t.itemPack.totalStorage=O.totalStorage):(t.itemPack.version=O.version,t.itemPack.totalItemSize=O.usage.totalItemSize),t.fromTopControlPanel=!0,y((0,j.Gh)(t))},children:(0,s.jsx)("i",{className:"fa fa-ellipsis-v fa-lg","aria-hidden":"true"})})}),q.asPath.includes("/contents/")&&!E&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:ec,children:(0,s.jsx)("i",{className:"fa fa-search fa-lg","aria-hidden":"true"})})})]})]})]})})})})}),E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)(l.Z,{children:(0,s.jsx)(c.Z,{xs:12,sm:{span:10,offset:1},lg:{span:8,offset:2},children:(0,s.jsx)(d.Z,{className:"".concat(g().containerSearchPanel),children:(0,s.jsx)(f.Z,{onSubmit:eo,className:g().searchBar,children:(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(f.Z.Control,{ref:b,type:"text",className:"".concat(g().searchBarInput,"  display-1"),value:S,onChange:e=>{(0,v.qu)(!1,"search value:",e.target.value),B(e.target.value)}}),(0,s.jsx)(u.Z,{variant:"link",children:(0,s.jsx)("i",{id:"1",className:"fa fa-search fa-lg text-black","aria-hidden":"true",onClick:eo})}),(0,s.jsx)(u.Z,{variant:"link",children:(0,s.jsx)("i",{id:"1",className:"fa fa-times fa-lg text-black","aria-hidden":"true",onClick:e=>{e.preventDefault(),B(""),W(!1),I()}})})]})})})})})]}),(0,s.jsx)(x.Z,{show:M,handleClose:()=>L(!1),handleCreateANewItem:el})]})}}}]);